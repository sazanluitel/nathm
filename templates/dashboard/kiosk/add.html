{% load static %}
<!DOCTYPE html>

<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Admission Form</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"/>
    <style>
        :root {
            --placeholder: #ccc;
        }

        body {
            overflow: hidden;
        }

        body .btn-primary {
            --btn-primary: #1B5C9C;
            --bs-btn-bg: var(--btn-primary);
            --bs-btn-border-color: var(--btn-primary);
            --bs-btn-hover-bg: var(--btn-primary);
            --bs-btn-hover-border-color: var(--btn-primary);
            --bs-btn-active-bg: var(--btn-primary);
            --bs-btn-active-border-color: var(--btn-primary);
            --bs-btn-disabled-bg: var(--btn-primary);
            --bs-btn-disabled-border-color: var(--btn-primary);
        }

        .kiosk_template {
            padding-top: 40px;
            margin: auto;
            position: relative;
            height: calc(100vh - 40px);
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .kiosk__template__logo__wrapper,
        .kiosk__tempalte__footer__wrapper {
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .kiosk_template__logo {
            border: 1px dotted #beb8b7;
            border-radius: 20px;
            padding: 0 40px;
            display: inline-block;
            background-color: white;
            position: absolute;
            top: -35px;
            z-index: 99999;
        }

        .kiosk_template__logo img {
            width: 150px;
            display: block;
            margin: 0 auto;
        }

        .border-box {
            border: 5px solid #1b5c9d;
            width: 100%;

            height: 100%;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            position: relative;
            display: flex;
            flex-direction: column;
        }

        .scrollable-form {
            z-index: 555;
            overflow-y: auto;
            flex-grow: 1;
            padding-right: 10px;
        }

        .kiosk__tempalte__footer {
            position: fixed;
            bottom: 2%;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: white;
            padding: 15px 40px;
            border: 1px dotted #beb8b7;
            border-radius: 20px;
            z-index: 99999;
        }

        .submit__btn {
            background-color: #1b5c9d;
            margin-left: 10px;
        }

        .submit__btn:hover {
            background-color: #1b5c9d;
            margin-left: 10px;
        }

        .fixed-buttons {
            position: fixed;
            padding: 15px 0;
            display: flex;
            justify-content: flex-end;
            right: 40px;
            bottom: 40px;
        }

        .card {
            --bs-card-border-color: rgba(0, 0, 0, 0.1);
            margin: 1.5rem !important;
        }

        .card .card-header {
            padding: 15px;
            background-color: rgb(219 219 219 / 10%);
            font-size: 1.2rem;
            font-weight: 500;
        }

        .card input,
        .card input:focus,
        .card select,
        .card select:focus,
        .card textarea,
        .card textarea:focus {
            outline: none;
            box-shadow: none;
            padding: 10px 15px;
        }

        .card .form-group {
            margin-bottom: 1rem;
        }

        ::-webkit-input-placeholder {
            color: var(--placeholder) !important;
        }

        :-moz-placeholder {
            color: var(--placeholder) !important;
            opacity: 1;
        }

        ::-moz-placeholder {
            color: var(--placeholder) !important;
            opacity: 1;
        }

        :-ms-input-placeholder {
            color: var(--placeholder) !important;
        }

        ::-ms-input-placeholder {
            color: var(--placeholder) !important;
        }

        ::placeholder {
            color: var(--placeholder) !important;
        }

        select,
        select option {
            color: #000000;
        }

        select:invalid,
        select option[value=""] {
            color: var(--placeholder) !important;
        }

        .invalid-feedback {
            display: block;
        }

        .alert {
            margin-bottom: 0;
            border-radius: 10px 10px 0 0;
        }

        .alert-error {
            color: #842029;
            background-color: #f8d7da;
            border-color: #f5c2c7;
        }

        .signature-pad {
            height: 300px;
        }

        body #signatureModal{
            z-index: 9999999;
        }

        body .modal-backdrop{
            z-index: 999999;
        }
    </style>
</head>
<body>
<div class="container-fluid d-flex justify-content-center align-items-center vh-90 kiosk_template">
    <div class="border-box p-0">
        <!-- Logo -->
        <div class="kiosk__template__logo__wrapper">
            <div class="kiosk_template__logo text-center mb-4">
                <img src="{% static 'dashboard/assets/images/logo.jpg' %}" alt="College Logo" class="img-fluid"/>
            </div>
        </div>

        {% with messages=messages %}
            {% include 'dashboard/alert.html' %}
        {% endwith %}
        <div class="card-header h3 px-4 py-4">Admission Form</div>

        <div class="scrollable-form pb-5">
            <form method="POST" action="{% url 'students:kiosk-reg' %}">
                {% csrf_token %}

                <!-- Student Info -->
                <div class="card">
                    <div class="card-header h6">General Infromation</div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-lg-3">
                                <div class="form-group">
                                    <label class="form-label">Title:</label>
                                    {{ form.user_form.title }}
                                    {% include 'parts/error.html' with errors=form.user_form.title.errors %}
                                </div>
                            </div>

                            <div class="col-lg-3">
                                <div class="form-group">
                                    <label class="form-label">First Name:</label>
                                    {{ form.user_form.first_name }}
                                    {% include 'parts/error.html' with errors=form.user_form.first_name.errors %}
                                </div>
                            </div>

                            <div class="col-lg-3">
                                <div class="form-group">
                                    <label class="form-label">Middle Name:</label>
                                    {{ form.user_form.middle_name }}
                                    {% include 'parts/error.html' with errors=form.user_form.middle_name.errors %}
                                </div>
                            </div>

                            <div class="col-lg-3">
                                <div class="form-group">
                                    <label class="form-label">Last Name:</label>
                                    {{ form.user_form.last_name }}
                                    {% include 'parts/error.html' with errors=form.user_form.last_name.errors %}
                                </div>
                            </div>

                            <div class="col-lg-6">
                                <div class="form-group">
                                    <label class="form-label">Gender:</label>
                                    {{ form.personal_info_form.gender }}
                                    {% include 'parts/error.html' with errors=form.personal_info_form.gender.errors %}
                                </div>
                            </div>

                            <div class="col-lg-6">
                                <div class="form-group">
                                    <label class="form-label">Email:</label>
                                    {{ form.user_form.email }}
                                    {% include 'parts/error.html' with errors=form.user_form.email.errors %}
                                </div>
                            </div>

                        </div>
                    </div>
                </div>

                <!-- Temporary Address -->
                <div class="card mt-3">
                    <div class="card-header">Temporary Address</div>
                    <div class="card-body">
                        <div class="row">
                            {% for field in form.temporary_address_form %}
                                <div class="col-lg-4">
                                    <div class="form-group">
                                        <label for="{{ field.id_for_label }}"
                                               class="form-label">{{ field.label }}</label>
                                        {{ field }}
                                        {% include 'parts/error.html' with errors=field.errors %}
                                    </div>
                                </div>
                            {% endfor %}
                        </div>
                    </div>
                </div>

                <!-- Permanent Address -->
                <div class="card mt-3">
                    <div class="card-header">Permanent Address</div>
                    <div class="card-body">
                        <div class="row">
                            {% for field in form.permanent_address_form %}
                                <div class="col-lg-4">
                                    <div class="form-group">
                                        <label for="{{ field.id_for_label }}"
                                               class="form-label">{{ field.label }}</label>
                                        {{ field }}
                                        {% include 'parts/error.html' with errors=field.errors %}
                                    </div>
                                </div>
                            {% endfor %}
                        </div>
                    </div>
                </div>

                <!-- Emergency Contact -->
                <div class="card mt-3">
                    <div class="card-header">Emergency Contact</div>
                    <div class="card-body">
                        <div class="row">
                            {% for field in form.emergency_contact_form %}
                                <div class="col-lg-4">
                                    <div class="form-group">
                                        <label for="{{ field.id_for_label }}"
                                               class="form-label">{{ field.label }}</label>
                                        {{ field }}
                                        {% include 'parts/error.html' with errors=field.errors %}
                                    </div>
                                </div>
                            {% endfor %}

                            {% for field in form.emergency_address_form %}
                                <div class="col-lg-4">
                                    <div class="form-group">
                                        <label for="{{ field.id_for_label }}"
                                               class="form-label">{{ field.label }}</label>
                                        {{ field }}
                                        {% include 'parts/error.html' with errors=field.errors %}
                                    </div>
                                </div>
                            {% endfor %}
                        </div>
                    </div>
                </div>

                <!-- Student Info -->
                <div class="card mt-3">
                    <div class="card-header h6">Financial Capacity</div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-lg-6">
                                <div class="form-group">
                                    <label class="form-label">Father's Occupation:</label>
                                    {{ form.student_form.father_occupation }}
                                    {% include 'parts/error.html' with errors=form.student_form.father_occupation.errors %}
                                </div>
                            </div>

                            <div class="col-lg-6">
                                <div class="form-group">
                                    <label class="form-label">Mother's Occupation:</label>
                                    {{ form.student_form.mother_occupation }}
                                    {% include 'parts/error.html' with errors=form.student_form.mother_occupation.errors %}
                                </div>
                            </div>

                            <div class="col-lg-6">
                                <div class="form-group">
                                    <label class="form-label">Annual Income:</label>
                                    {{ form.student_form.annual_income }}
                                    {% include 'parts/error.html' with errors=form.student_form.annual_income.errors %}
                                </div>
                            </div>

                            <div class="col-lg-6">
                                <div class="form-group">
                                    <label class="form-label">Members in Family:</label>
                                    {{ form.student_form.members_in_family }}
                                    {% include 'parts/error.html' with errors=form.student_form.members_in_family.errors %}
                                </div>
                            </div>

                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">Payment Detail</div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-lg-6">
                                <div class="form-group">
                                    <label for="{{ form.student_form.payment_by.id_for_label }}"
                                           class="form-label">{{ form.student_form.payment_by.label }}</label>
                                    {{ form.student_form.payment_by }}
                                    {% include 'parts/error.html' with errors=form.student_form.payment_by.errors %}
                                </div>
                            </div>
                            <div class="col-lg-6">
                                <div class="form-group">
                                    <label for="{{ form.student_form.organization.id_for_label }}"
                                           class="form-label">{{ form.student_form.organization.label }}</label>
                                    {{ form.student_form.organization }}
                                    {% include 'parts/error.html' with errors=form.student_form.organization.errors %}
                                </div>
                            </div>

                            {% for field in form.payment_address_form %}
                                <div class="col-lg-4">
                                    <div class="form-group">
                                        <label for="{{ field.id_for_label }}"
                                               class="form-label">{{ field.label }}</label>
                                        {{ field }}
                                        {% include 'parts/error.html' with errors=field.errors %}
                                    </div>
                                </div>
                            {% endfor %}
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-lg-6">
                        <!-- about us -->
                        <div class="card mt-3">
                            <div class="card-header h6">How did you learn about Us</div>
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-md-12 mb-3">
                                        <label for="{{ form.student_form.about_us.id_for_label }}" class="form-label">How
                                            Did
                                            You
                                            Know About Us</label>
                                        {{ form.student_form.about_us }}
                                        {% include "parts/error.html" with errors=form.student_form.about_us.errors %}
                                    </div>
                                    <div class="col-md-12 mb-3" id="about_us_other_container" style="display: none;">
                                        {{ form.student_form.about_us_other }}
                                        {% include "parts/error.html" with errors=form.student_form.about_us_other.errors %}
                                    </div>
                                    <div class="col-md-12 mb-3">
                                        <label for="{{ form.student_form.why_us.id_for_label }}" class="form-label">Why
                                            You
                                            Choose
                                            Us</label>
                                        {{ form.student_form.why_us }}
                                        {% include "parts/error.html" with errors=form.student_form.why_us.errors %}
                                    </div>
                                    <div class="col-md-12 mb-3" id="why_us_other_container" style="display: none;">
                                        {{ form.student_form.why_us_other }}
                                        {% include "parts/error.html" with errors=form.student_form.why_us_other.errors %}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-lg-6">
                        <div class="card">
                            <div class="card-header h6">Signature</div>
                            <div class="card-body">
                                <input style="display:none;" type="file" name="signature-file" id="signature-file" />

                                <div class="signature_preview">
                                    <img src="" id="signature_preview" alt="Signature" />
                                </div>

                                <div class="text-center">
                                    <button data-bs-toggle="modal" data-bs-target="#signatureModal" type="button" class="btn btn-primary btn-sm w-100 px-4 py-2">Add Signature</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Submit Button -->
                <div class="fixed-buttons">
                    <button type="button" class="btn btn-danger clearForm rounded-pill px-4 py-2">Clear</button>
                    <button type="submit" class="btn rounded-pill text-white px-4 py-2 submit__btn">Submit</button>
                </div>
            </form>
        </div>
    </div>
</div>

<div class="modal fade" id="signatureModal" tabindex="-1" aria-labelledby="signatureModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Signature</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div id="canvas-wrapper" class="signature-pad--body">
                    <canvas></canvas>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary">Clear</button>
                <button type="button" class="btn btn-primary">Use This</button>
            </div>
        </div>
    </div>
</div>

<div class="kiosk__tempalte__footer__wrapper">
    <div class="kiosk__tempalte__footer">
        <p class="text-center h6 text text-secondary mb-0">www.ismt.edu.np</p>
    </div>
</div>


<script src="https://cdn.jsdelivr.net/npm/signature_pad@4.1.7/dist/signature_pad.umd.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
<script src="{% static 'dashboard/assets/js/kiosk.js' %}"></script>
</body>
</html>

